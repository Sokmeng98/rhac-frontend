#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Check Prettier standards for staged files
echo 'ğŸš¨ Checking code style and quality for staged files'
pnpm exec -- lint-staged ||
(
	echo 'Husky: âŒ Style check failed for staged files.';
	false;
)

# Run test
echo 'ğŸ—ï¸ğŸ‘· Testing, testing and building your project before committing'
pnpm test ||
(
	echo 'Husky: âŒ Test Failed.';
	false;
)

# If everything passes... Now we can commit
echo 'Husky: âœ… All checks passed! Trying to build now.'

pnpm build ||
(
	echo 'Husky: âŒ Build failed. View the errors above to see why.'
	false;
)

# If everything passes... Now we can commit
echo 'Husky: âœ… Committing changes.'
